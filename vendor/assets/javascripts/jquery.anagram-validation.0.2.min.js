(function(e){e.fn.anagramValidation=function(t){function S(t,r){function S(e,t){var n=new RegExp(Object.keys(t).join("|"),"gi");return e.replace(n,function(e){return t[e.toLowerCase()]})}function x(t,n,r,i,c,h){var p=O[l][r]||O[l]["text"],d=new RegExp(p.pattern),v={};v[s]=true;v[o]=true;v[u]=true;v[a]=true;v[f]=true;if(n||t){if(n&&!t){v[s]=false}if(n&&typeof t==="number"&&parseInt(t,10)===0){v[s]=false}if(t){v[o]=d.test(t)}if(i){v[a]=t.length>=i}if(c){v[u]=t.length<=c}if(h){v[f]=t===e('[name*="'+h+'"]').val()}}return v}function T(t,n){if(n.length>0){var r=e("<small>").attr({"class":O[c],"data-field":t.attr("name")}),i=e("<ul>");for(var s=0;s<n.length;s++){if(n[s].length>0){i.append(e("<li>").html(n[s]))}}r.append(i);t.after(r)}}function N(){if(e('[data-valid="false"]',t).length>0){e('[type="submit"]',t).addClass(O[p])}else{e('[type="submit"]',t).removeClass(O[p])}}function C(n,r){var i=e(n.target),s=null,u=null,a=[],f=null,c=null,p=null;r=r||{silence:false};t.trigger(d,[i]);switch(i[0].nodeName.toLowerCase()){case"input":switch(i.attr("type").toLowerCase()){case"radio":case"checkbox":s=i.closest("form").find('input[name="'+i.attr("name")+'"]:checked').val();break;default:s=i.val();break}break;case"select":s=i.val();break;case"textarea":s=i.val();break;default:break}if(i.is("[data-numeric]")){s=parseInt(s,10)}u=i.data("match")||i.attr("type");f=i.is("[required]");max=i.data("maxlength")||i.attr("maxlength");min=i.data("minlength")||i.attr("maxlength");p=i.data("repeat");validity=x(s,f,u,parseInt(min,10),parseInt(max,10),p);for(var m in validity){if(!validity[m]){var g=m+"-message",y="";if(m===o){var b=O[l][u]||O[l]["text"],y=i.data(g)||b.message}else{y=i.data(g)||O[g]}y=S(y,{"!name!":i.attr("name"),"!min!":min,"!max!":max});a.push(y)}}e('[data-field="'+i.attr("name")+'"]').detach();if(a.length>0){if(!r.silence){i.addClass(O[h]);if(!i.is("[data-silent]")){T(i,a)}}i.attr("data-valid","false")}else{i.removeClass(O[h]).attr("data-valid","true")}N();t.trigger(v,[i,validity])}function k(r,i){t.trigger(m);e(n,t).each(function(){e(this).trigger(w,[i])});N();t.trigger(g)}function L(n){if(e('[type="submit"]',n.target).hasClass(O[p])){n.preventDefault();return false}else{t.trigger(b);if(e('[data-valid="false"]',n.target).length===0){return true}else{n.preventDefault();return false}}}function A(n,r){for(var i in r){var s=e('[name*="'+i+'"]',n.target);if(s.length>0){T(s,r[i]);s.addClass(O[h]).attr({"data-valid":"false"})}}N();t.trigger(y)}this.loadErrors=function(e){t.trigger(E,[e])};var O=e.extend(true,i,r);t.on("submit",L);t.on(E,A);t.on("change keyup input blur",n,C);t.on(w,n,C);t.on("change",k);t.on(b,k);t.trigger(b,[{silence:true}]);if(typeof O.errors!=="undefined"){t.trigger(E,[O.errors])}return this}var n="input, select, textarea",r={email:{pattern:"^(([a-zA-Z0-9_\\-\\.\\+]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5}){1,25})+$",message:"Email is not valid"},emailList:{pattern:"^(([a-zA-Z0-9_\\-\\.\\+]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5}){1,25})+(([,.;]\\s*){1}(([a-zA-Z0-9_\\-\\.\\+]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5}){1,25})+)*$",message:"Email list is not valid"},text:{pattern:"^[\\w\\W\\s\\d\\D]*$",message:"Invalid text"},phone:{pattern:"^(\\d{3}|\\(\\d{3}\\))[-\\.\\s]?\\d{3}[-\\.\\s]?\\d{4}(\\s?(x|ext|ext\\.){1}\\s?\\d+)?$",message:"Phone number is not valid"},evenNumber:{pattern:"^d*[02468]{1}$",message:"Even number only"},oddNumber:{pattern:"^d*[13579]{1}$",message:"Odd number only"}},i={"error-field-class":"has-error","error-class":"error-message",patterns:r,"required-message":"!name! is a required field","minlength-message":"!name! is under !min! characters","maxlength-message":"!name! exceeds !max! characters","repeat-message":"Your must confirm your !name!","inactive-class":"inactive"},s="required",o="match",u="maxlength",a="minlength",f="repeat",l="patterns",c="error-class",h="error-field-class",p="inactive-class",d="validate.before",v="validate.complete",m="validate.all.before",g="validate.all.complete",y="errors.load.complete",b="validate.all",w="validate.field",E="errors.load";return this.each(function(){if(!e(this).data("anagram-validation-object")){e(this).data("anagram-validation-object",new S(e(this),t))}})}})(jQuery)